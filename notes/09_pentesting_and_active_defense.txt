Pentesting and Active Defense
-----------------------------

- penetration testing: we have a vulnerability report, we know what devices are there and what
                       services are running on these devices, we also know the vulnerabilities
                       that these services are presenting
                       => try to active exploit these vulnerabilities to prove that the
                          vulnerabilities are really there and are not just false positive
                          results

- Thread Hunting
    - looking for threats before they actually get a chance to happen
    - looking in network traffic, logs, processes, ...
    - looking but not touching
    - not disruptive
    - no direct interaction

- Pentesting
    - exploring how the network could be attacked
    - a process to identify vulnerabilities
    - actively attempting to break security => disruptive
    - provides an "outside" perspective on security (from the attackers point of view)
    - can involve social engineering as well
    - purpose: identify vulnerabilities and see if they can be exploited
    - very intrusive and risky -> get a written approval first
    - Rules of Engagement: the document that you sign as the approval for pentesting
        - authorization is a must, otherwise it is a cyber attack
        - time bound: When? How long?
        - scope: What is going to be affected? Must be clearly defined
        - are you in the right country? some countries make no difference between pentesting
          and a cyber attack -> look at territory laws
        - type of tests: web, WLAN, social engineering, ...
        - tools and techniques
        - White-box/Grey-box/Black-box
            -> how much knowledge do we have about the network that we are testing?
            - white: simulates insider threat
            - grey: more like an insider threat, but has no advanced knowledge, e.g. non-
                    technical user
            - black: external attacker with no privileges
        - engage staff or not? is human element involved?
        - reporting, what should be included in the end report? you cannot keep a
          vulnerability a secret for your benefits or otherwise

- Bug Bounties
    - rewards offered by large companies to hackers that discover vulnerabilities in their
      products
    - report the findings instead of exploiting it or selling it

- Wargames
    - attackers and defenders are split into two teams
    -> red team : attackers
    -> blue team : defenders
    -> white team : sets the rules of the game
    -> purple team : make sure that the interaction between red and blue is constructive

- reconnaissance in pentesting (pentesting is very similar to an actual attack)
    - OSINT (internet, media, social media, job postings, financial records, any publicly
      available information)
    - social engineering : hacking the human, more active information gathering, asking for
      confidential information, company structure, asking for usernames and passwords, ...
    - digital footprinting: using tools like nmap to scan the network, what is running in
      there, what is the topology, what security measures are in place, ...
    - wardriving: driving around the location scanning for wireless network, maybe someone has
      an unprotected access point somewhere in the office -> point of entry
      (nowadays can also be done with drones)








- phases of pentesting (same as the steps of an actual cyber attack)
    - reconnaissance
    - gain access
    -> sometime pentesting starts with initial access, so first two steps are not needed
    - establish persistence (keep a back door open, remote access trojan)
    - privilege escalation (get administrative access)
    - lateral movement (gain access to other systems as well)
    - pivoting (access resources inaccessible from the outside)
        -> e.g. compromise a webserver in order to pivot from it and access the backend
                databases (using it as an intermediary host)
    - actions on objective (steal data, delete data, disrupt services, ...)
    - removing traces (clear traces of compromise)